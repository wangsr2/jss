<script>
//   function Person(name, age) {
//     this.name = name;                // 添加name属性
//     this.age = age;                  // 添加age属性
//     this.sayHello = function () {    // 添加sayHello()方法
//       console.log('你好，我是' + this.name);
//     };
//   }
//   var p1 = new Person('张三', 18);
//   var p2 = new Person('李四', 19);
//   console.log(p1);                  // 输出结果：Person {name: "张三", age: 18}
//   console.log(p2);                  // 输出结果：Person {name: "李四", age: 19}
//   p1.sayHello();                    // 输出结果：你好，我是 张三
//   console.log(p1.constructor);      // 输出结果：function Person(name, age) ……



//   // 定义类---ES6新增
//   class Student {
//     //仅属性使用构造函数
//      constructor (name, age, gender) {    // 构造方法
//       this.name = name;                  // 添加name属性
//       this.age = age;                    // 添加age属性
//       this.gender = gender;              // 添加gender属性
//     }
//     //函数独立列出，不用function关键字
//     introduce() {                        // 定义introduce()方法
//       console.log('我是' + this.name + '，今年' + this.age + '岁。');
//     }
//   }
//   // 实例化时会自动调用constructor()构造方法
//   var st = new Student('王五', 19, '男');
//   st.introduce();    // 输出结果：我是王五，今年19岁。
// // 商品类
//    class commdity{
//    constructor (id,name, unitprice, number) {    
//       this.id=id;
//       this.name=name;
//       this.unitprice=unitprice;
//       this.number=number;

//     }
//     aa(){
//       console.log('id:'+this.id+' '+'商品名:'+this.name+' '+'单价:'+this.unitprice+' '+'数量:'+this.number);
//     }
//   }
//   var sp=new commdity(2,'兔子',8888,5);
//   sp.aa();
// 商品类
class product{
  constructor(id,title,price,imgSrc){
    this.id=id;
    this.title=title;
    this.price=price;
    this.imgSrc=imgSrc;
  }
}
  
//访问商品对象
console.log(product1);
console.log(product2);
// //形式访问商品对象属性
// console.log(product1.id);
// console.log(product2.id);
// //下标形式访问商品
// console.log(product1['id']);
// console.log(product2['id']);
//订单类
// class Order{
//   constructor(product,qty){
//     //订单类成员
//     this.product=product;
//     this.qty=qty;
//   }
// }
//订单类2
class Order{
 constructor(product,qty){
   this .id=product.id;
   this.title=product.title;
   this.price=product.price;
   this .imgSrc=product.imgSrc;
   this.qty=qty;
 } 

}

//获得订单对象
// console.log(order1);
//获得订单对象的product属性
// console.log(order1.product);
//二级属性title
// console.log(order);


// var order2=new Order(product2,4);
// console.log(order2.product.price);


//购物车数据类--确定格式
class CartData{

  constructor(){
  this.orderList=new Array();
  this.units=0;
  this.totalQty=0;
  this.totaAmount=0;
   } 
 }





 // 将某个订单order，加入购物车
 function addtoCart(order){
var flag=true;//假设当前状态新商品
for(var i=0;i<myCart.orderList.length;i++){
  if(order.id == myCart.orderList[i].id){
    flag=false; //假设当前状态 老商品
    //新增对应qty
    myCart.orderList[i].qty+=order.qty;
    break;
    }
}

if(flag){
  //order是购物车中的新商品
  myCart.orderList.push(order);
  myCart.units++;
  
}
//总数量与金额
myCart.totalQty +=order.qty;
myCart.totalAmount +=order.price * order.qty;
}




// 商品对象实例
var product1=new product('01','兔子',888,'http://b-ssl.duitang.com/uploads/item/201805/03/20180503112011_shjjy.thumb.224_0.gif');
var product2=new product('02','大兔子',9.90,'http://b-ssl.duitang.com/uploads/item/201805/03/20180503112011_shjjy.thumb.224_0.gif');



 //实例化购物车数据--订单1进购物车
 var myCart=new CartData();


var order=new Order(product1,5);
addtoCart(order);

// myCart.orderList.push(order);
// myCart.units=1;
// myCart.totalQty=order.qty;
// myCart.totaAmount=order.price*order.qty;
console.log(myCart);




order=new Order(product2,3);
addtoCart(order);//调用加入购物车
console.log(myCart);

order=new Order(product2,1);
addtoCart(order);//调用加入购物车
console.log(myCart);


</script>